<html><head><title>CIS 4930/6930, Programming Assignment 3</title>
</head>

<body>
<h1>CIS 4930/6930, Programming Assignment 3</h1>

<h2>Android 2.3.3 Vold Daemon exploit</h2>

Due: Friday Oct 28 11:59pm. <br>

<hr>


<h3> Description </h3>
In this assignment you will have an opportunity to write an exploit for an Android 2.3.3 unprotected pointer
vulnerability. You need to follow <b>SetupAndroidEmulator.pdf</b> and <b>SetupNDK.pdf</b> to setup your environment.

<h3> Task (20 pts) </h3>
<ul>
<li>
Write an exploit for the vulnerability that executes your backdoor creator program under root privilege.
The exploit must take the following inputs: &lt;got_entry_address&gt; &lt;pointer_address&gt; &lt;vold_process_id&gt;
</li>
<li>
The backdoor creator should remount the /data partition with rw permission, and create a setuid-enabled <b>sh</b> file (user.group should be root.root) in your local directory (/data/local/tmp).
</li>
</ul>
Your exploit program should be written in C language, and can be compiled in Android NDK.
The code template for the exploit is provided; you just need to fill in the missing parts
to finish your assignment.

Your backdoor creator should be written in shell script.
<p><b>Hints:</b>

<ul>
<li>
If the exploit does not work when you test it, you should kill the vold process.
A fresh vold will be automatically spawn, and your next test should use the new
process id.
</li>
<li>
Test your backdoor creator using root privilege before stesting your exploit.
This will make sure that potential problems
does not come from your backdoor creator.
</li>
</ul>

For this assignment, you shall submit the following:

<ol>
  <li> (8 pts in total) A log documenting:
    <ul>
        <li>(1 pts) Setup Android Emulator with screenshot of launched emulator and successfully execute "adb shell".</li>
        <li>(1 pts) Setup Android NDK with screenshot of successfully compile and execute hello.c program.</li>
        <li>(1 pts) How to obtain GOT address and pointer address.</li>
        <li>(2 pts) How to create backdoor.</li>
        <li>(3 pts) How to develop the exploit program and the thinking behind the conclusions made.</li>
    </ul>
  </li>

  <li> (7 pts) Source code of the exploit, and what we need to do to compile/run
    your program.
  </li>
  
  <li> (5 pts) Source code of the backdoor creator.
  </li>
</ol>

Put everything in a single compressed file and submit it on CANVAS.
Even if you cannot finish a task, please still submit the log and
the partially-working program so that we can know your progress.

<h3> Staged Deadlines  </h3>

This assignment involves a number of steps. Thus we request that you finish the various
steps no later than the following deadlines. You want to finish each step as early as
possible to account for unanticipated challenges in the later steps. In addressing
questions during office hours, we will have to prioritize questions on steps that are
not due yet.

<ol>
  <li> By <b>Oct 14</b>, you need to set up the working environment, including the Android emulator, and the NDK.
  </li>
  
  <li> By <b> Oct 20 </b>, you need to finish obtaining the GOT address and pointer address. You shall have practiced compiling a native program (e.g., the hello world program) in NDK.
    </li>
    
  <li> By <b> Oct 24 </b>, you need to finish the back door creator.
  </li>

  <li> By <b> Oct 28 </b>, you need to finish the exploit generator and submit the project.
  </li>
</ol>
    
       </td>
   </tr>
</table>


</body></html>
